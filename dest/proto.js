/**
 * https://github.com/wusfen/proto.js
 *
 * proto.js 是一个js增强库，提供许多实用的链式方法，使数据操作更加方便
 * 
 * @author
 * wushufen: 404315887@qq.com
 */

!function(n,t,r,e,i,u,o,s,c){n.getType=function(t){return n.prototype.toString.call(t).slice(8,-1).toLowerCase()},n.isType=function(t,r){return t.toLowerCase()==n.getType(r)},n.toObject=function(t){return n(t)},t.toArray=function(n){if(n&&"length"in n){for(var t=[],r=n.length;r--;)t[r]=n[r];return t}return[n]},r.toDate=function(n){return isNaN(n)?"string"==typeof n&&(n=u(n).replace(/-/g,"/"),n=n.replace(/年|月/g,"/").replace("日"," ")):n=+n,new r(n)},e.toRegExp=function(n){return e(n)},i.toFunction=function(n){try{return i(n)}catch(t){return function(){}}};var f=u.toString;u.toString=function(n){return arguments.length>0?u(n):f.call(u)},o.toNumber=function(n){var t=o(n);return t=isNaN(t)?o(u(n).match(/\d+/)):t,t=isNaN(t)?+n:t},s.toBoolean=function(n){return"true"==n?!0:"false"==n?!1:!!n},t.isArrayLike=function(t){return"length"in n(t)},o.isInt=function(n){return"number"==typeof n&&!u(n).match(/\.|NaN|Infinity/)},o.isNaN=function(n){return"number"==typeof n&&isNaN(n)},n.isObject=function(t){return n.isType("object",t)},n.isUndefined=function(t){return n.isType("undefined",t)},n.isNull=function(t){return n.isType("null",t)},n.isArrayLike=function(n){return t.isArrayLike(n)},n.isEmpty=function(t){return t&&"object"==typeof t?!n.keys(t).length:!t},o.toInt=function(n){var t=parseInt(n);return t=isNaN(t)?+n:t,isNaN(t)?0:t};for(var a=[t,r,e,i,u,o,s],y=0;y<a.length;y++)!function(){var r=a[y],e=r.name,i=r.prototype;i.getType=function(){return n.getType(this)},i.isType=function(t){return n.isType(t,this)},i["is"+e]=function(){return n.isType(e,this)},r["is"+e]=function(t){return n.isType(e,t)},n["is"+e]=function(t){return n.isType(e,t)},i.isInt=function(){return o.isInt(this)},i.isNaN=function(){return isNaN(this)},i.isArrayLike=function(){return t.isArrayLike(this)},i.isEmpty=function(){return n.isEmpty(this)};for(var u=0;u<a.length;u++)!function(){var n=a[u],t="to"+n.name;i[t]||(i[t]=function(){return n[t](this.valueOf())})}();i.toInt=i.parseInt=function(){return o.toInt(this)},i.toJson=function(n){return JSON.stringify(this.valueOf(),null,n)}}()}(Object,Array,Date,RegExp,Function,String,Number,Boolean);
!function(n,t){n.trim=function(t){return null===t||void 0===t?"":n(t).replace(/^\s+|\s+$/g,"")},t.trim=function(){return this.replace(/^\s+|\s+$/g,"")},n.tpl=function(n,t){var r=n.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/(<%=|{{)([\s\S]*?)(}}|%>)/g,"$1_html_+= ($2)\n$3").replace(/(<%)(?!=)([\s\S]*?)(%>)/g,"$1\n	$2\n$3").replace(/(^|%>|%>|}})([\s\S]*?)({{|<%=|<%|$)/g,function(n,t,r,e){return'_html_+= "'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r?\n/g,"\\n")+'"\n'});return r=Function("data",'with(data||{}){\nvar _html_=""\n'+r+"\nreturn _html_\n}"),t?r(t):r},t.tpl=function(t){return n.tpl(this,t)}}(String,String.prototype);
!function(r,t){function n(r,t,n){var e=(String(r).split(".")[1]||"").length,i=(String(n).split(".")[1]||"").length,a=Math.max(e,i),u=Math.pow(10,a),c=+(String(r).replace(".","")+Array(a-e+1).join(0)),o=+(String(n).replace(".","")+Array(a-i+1).join(0));switch(t){case"+":return(c+o)/u;case"-":return(c-o)/u;case"*":return c*o/(u*u);case"/":return c/o}}"+-*/".replace(/./g,function(r){t[r]=function(t){return n(this,r,t)}}),t.add=t["+"],t.subtrack=t["-"],t.multiply=t["*"],t.divide=t["/"],t.fixed=function(r){return+this.toFixed(r||10)},r.random=function(r,t,n){var e=Math.random()*(t-r+(n?0:1))+r;return n?e:parseInt(e)}}(Number,Number.prototype);
!function(t,e){function n(t){return(10>t?"0":"")+t}e.format=function(t){t=t||"yyyy-MM-dd HH:mm:ss";var e=this,n={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),h:function(){var t=e.getHours();return t>12?t-12:t}(),m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds()};for(var r in n)t=t.replace(RegExp(r+"+","g"),function(t){var e=n[r]+"",i=(Array(t.length).join(0)+e).slice(-t.length);return e.length>i.length?e:i});return t.replace(/E+/g,function(){return String(e).match("中国")?"星期"+"日一二三四五六".charAt(e.getDay()):"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")[e.getDay()]})},e._toString=e.toString,e.toString=function(t){return t?this.format(t):this._toString()},e.isInvalid=e.isInvalidDate=function(){return isNaN(this)},e.isValid=e.isValidDate=function(){return!isNaN(this)},e.toISOString=e.toISOString||function(){return this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},e.toJSON=e.toJSON||function(){return this.toISOString()},"FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds,Time".replace(/\w+/g,function(t){e["add"+t]=function(e){return this["set"+t](this["get"+t]()+e),this},e[t.toLowerCase()]=function(e){return void 0===e?this["get"+t]():(this["set"+t](e),this)},e["diff"+t]=function(e){this.getTime()-e.getTime();return this["get"+t]()-e["get"+t]()}}),e.diff=function(t,e){var n=this,e=e||"d天HH时mm分ss秒SSS",r=n-t,i={y:31536e6,M:2592e6,d:864e5,H:36e5,h:36e5,m:6e4,s:1e3,S:1},s="yMdHhmsS".split("");if(e.match(/^[yMdHhmsS]$/))return r/i[e];for(var o={},u=r,g=0;g<s.length;g++){var a=s[g],h=i[a];if(e.match(a)){var l=parseInt(u/h);u-=l*h,o[a]=l}}var c=e;for(var a in o)c=c.replace(RegExp(a+"+","g"),function(t,e){var n=o[t.substr(0,1)]+"",r=Array(4).join("0")+n;return r=r.substr(-t.length),n=n.length>t.length?n:r});return c},t.yesterday=function(e){return e=e||new t,new t(e.getFullYear(),e.getMonth(),e.getDate()-1)},t.today=function(e){return e=e||new t,new t(e.getFullYear(),e.getMonth(),e.getDate())},t.tomorrow=function(e){return e=e||new t,new t(e.getFullYear(),e.getMonth(),e.getDate()+1)}}(Date,Date.prototype);
!function(r,n){r.assign=r.assign||function(r,n){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var e in o)o.hasOwnProperty(e)&&(r[e]=o[e])}return r},r.keys=r.keys||function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(t);return n},r.values=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(r[t]);return n},r.copy=function(r,n){function t(r){var t=typeof r;if(e+=1,e>n)return r;if(null===r||"object"!=t)return r;var a=r instanceof Array?[]:{};return o.push({obj:r,_obj:a}),a}var o=[],e=0;n=n||1e3;for(var a=t(r);o.length;)!function(){var r=o.shift(),n=r.obj,e=r._obj;if(n instanceof Array)for(var a=0;a<n.length;a++)e[a]=t(n[a]);else for(var a in n)e[a]=t(n[a])}();return a}}(Object,Object.prototype);
!function(t,r){function n(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function e(t,r,i,h){if(h=h||0,h>10)return!1;if(i)switch(i){case"==":return t==r;case"===":return t===r;case"!=":return t!=r;case"!==":return t!==r;case">":return t>r;case">=":return t>=r;case"<":return r>t;case"<=":return r>=t}if("regexp"==n(r))return r.test(t);if(t===r)return!0;if(!("object"==typeof t&&null!==t||"object"==typeof r&&null!==r))return String(t)===String(r);if("array"==n(t)&&"array"==n(r)){if(t.length!=r.length)return!1;for(var u=0,s=r.length;s>u;u++)if(!e(t[u],r[u],"",h+1))return!1;return!0}if("object"==n(t)&&"object"==n(r)){if(!Object.keys(t).length&&!Object.keys(r).length)return!0;var o=!1;for(var a in r){var c=a.match(/(.+?)\s*(===|!==|==|!=|>=|>|<=|<)?\s*$/)||[],i=c[2],f=c[1];if(f in t&&(o=!0,!e(t[f],r[a],i,h+1)))return!1}return o}return!1}function i(t,r){r=r||0;var e=t[r||0];if(t.length==r+1&&"array"==n(e)&&e.length)return e;for(var i,h=[],u=t.length;i=u-r;)u--,i--,h[i]=t[u];return h}t.range=function(t,r,n){void 0==r&&(r=t,t=0),n=n||1;for(var e=[],i=0;!0;i++){var h=t+i*n;if(h>=r)break;e[i]=h}return e};var h=!1;Object.defineProperty&&Object.defineProperty(t.prototype,"__noforin__",{configurable:!0,enumerable:!0,get:function(){return h||(h=!0,console.trace("勿用 for...in 遍历数组")),"__noforin__"},set:function(){}});var u={forEach:function(t,r){for(var n=0,e=this.length;e>n&&n<this.length;n++)t.call(r,this[n],n,this)},map:function(t,r){var n=[];return this.forEach(function(e){n.push(t.apply(r,arguments))}),n},fliter:function(t,r){var n=[];return this.forEach(function(e){t.apply(r,arguments)&&n.push(e)}),n},indexOf:function(t,r){var n=r||0;n=0>n?this.length+n:n;for(var e=this.length-1,i=n;e>=i;i++)if(this[i]===t)return i;return-1},lastIndexOf:function(t,r){var n=0,e=r||this.length-1;e=0>e?this.length+e:e;for(var i=e;i>=n;i--)if(this[i]===t)return i;return-1},includes:function(t,r){return-1!=this.indexOf(t,r)}};for(var s in u)r[s]=u[s];Object.isMatch=e;var o={each:function(t,r){return this.forEach.apply(this,arguments),this},select:function(t,r){for(var n=[],i=0,h=this.length;h>i;i++){var u=this[i];if(e(u,t)&&(n.push(u),r))break}return n},get:function(t){return this.select(t,!0)[0]||!1},getIndex:function(t){for(var r=0,n=this.length;n>r;r++){var i=this[r];if(e(i,t))return r}return-1},has:function(t){for(var r=i(arguments),n=!0,e=0;e<r.length;e++){var h=r[e];if(!this.select(h).length){n=!1;break}}return n},insert:function(t){var r=i(arguments);return this.push.apply(this,r),this},insertIndex:function(t,r){var n=i(arguments,1);return 0>t&&(t=this.realIndex(t)+1),this.splice.apply(this,[t,0].concat(n)),this},ensure:function(r){r=t.isArray(r)?r:[r];for(var n=0;n<r.length;n++){var e=r[n];this.has(e)||this.push(e)}return this},update:function(t,r){if(!r){r=t;var i=!0}for(var h=0,u=this.length;u>h;h++){var s=this[h];if(i||e(s,t))if("object"==n(s)&&"object"==n(r))for(var o in r)r.hasOwnProperty(o)&&(s[o]=r[o]);else this[h]=r}return this},updateIndex:function(t,r){t=this.realIndex(t);var e=this.nth(t);if("object"==n(e)&&"object"==n(r))for(var i in r)e[i]=r[i];else this[t]=r;return this},remove:function(t){if(0==arguments.length)return this.empty();for(var r=i(arguments),n=0,h=this.length;h>n;n++)for(var u=this[n],s=0;s<r.length;s++){var o=r[s];e(u,o)&&(this.splice(n,1),n--,h--)}return this},removeIndex:function(t){return this.splice(t,1),this},empty:function(){return this.splice(0),this},orderBy:function(t,r){return this.sort(function(n,e){return n=t?n[t]:n,e=t?e[t]:e,r?e>n?1:n==e?0:-1:n>e?1:n==e?0:-1})},groupBy:function(t){for(var r={},n=0;n<this.length;n++){var e=this[n],i=e[t],h=r[i]||(r[i]=[]);h.push(e)}return r},groupCount:function(t){return Object.keys(this.groupBy(t)).length},fields:function(){for(var t={},r=0;50>r&&!(r>this.length-1);r++){var n=40>r?r:parseInt(Math.random()*(this.length-40))+40,e=this[n];for(var i in e)e.hasOwnProperty(i)&&(t[i]=1)}return Object.keys(t)},column:function(t){return this.map(function(r){return r[t]})},page:function(t,r){r=r||10;var n=(t-1)*r;0>t&&(n=t*r);var e=n+r;return-1==t&&(e=void 0),this.slice(n,e)},pageCount:function(t){return Math.ceil(this.length/(t||10))},top:function(t){return this.slice(0,t)},limit:function(t,r){return this.slice(t,t+r)},realIndex:function(t){return t>=0?t:this.length+t},nth:function(t){return this[this.realIndex(t)]},first:function(){return this[0]},last:function(){return this[this.length-1]},index:function(t,r){return null===t?this.insert(i(arguments,1)):null===r?this.removeIndex(t):1==arguments.length?this.nth(t):this.updateIndex(t,r)},unique:function(){for(var t=this.length,r=0;t>r;r++)for(var n=r+1;t>n;n++)e(this[r],this[n])&&(this.splice(n--,1),t--);return this},eq:function(t){return this.length==t.length&&this.has(t)&&t.has(this)},same:function(t){for(var r=[],n=0,e=this.length;e>n;n++){var i=t[n];this.has(i)&&r.push(i)}return r},xor:function(t){return this.copy().remove(t).concat(t.copy().remove(this))},max:function(t){if(arguments.length){var r=this[0];return this.each(function(n){n[t]>r[t]&&(r=n)}),r}return Math.max.apply(Math,t?this.column(t):this)},min:function(t){if(arguments.length){var r=this[0];return this.each(function(n){n[t]<r[t]&&(r=n)}),r}return Math.min.apply(Math,t?this.column(t):this)},sum:function(t){for(var r=t?this.column(t):this,n=0,e=0,i=this.length;i>e;e++){var h=r[e];isNaN(h)||(n+=+h)}return n},avg:function(t){return this.sum(t)/this.length},copy:function(t){return t?Object.copy(this):this.concat()},shuffle:function(){return this.sort(function(t,r){return Math.random()-.5})},random:function(t,r){t=t||0,r=r||this.length-1;var n=parseInt(Math.random()*(r-t+1)+t);return this[n]},toMap:function(t){for(var r={},n=0,e=this.length;e>n;n++){var i=this[n],h=i[t];r[h]=i}return r},key:function(t){var r=this[0];return r?r[t]:void 0}};o.where=o.select,o["delete"]=o.remove,o.del=o.remove,o.difference=o.remove,o.without=o.remove,o.deleteIndex=o.removeIndex,o.delIndex=o.removeIndex,o.col=o.column,o.contains=o.has,o.add=o.insert,o.union=o.ensure,o.uniq=o.unique;for(var s in o)r[s]=o[s]}(Array,Array.prototype);
!function(n,t){t.bind=t.bind||function(n){var t=this;return function(){t.apply(n||this,arguments)}},t.once=function(){var n=this,t=!1;return function(){t||(t=!0,n.apply(this,arguments))}},t.delay=function(n){var t=this;return function(){setTimeout(function(){t.apply(this,arguments)},n)}},t.debounce=function(n){}}(Function,Function.prototype);
!function(n){n.JSON={parse:function(r){var t=String(r).replace(/"(\\.|.)*?"/g,"");if(t.match(/\(|=/))throw'parse match "(..)" or "="';return n.eval("("+r+")")},stringify:function(n,r,t){return"number"==typeof t&&(t=Array(t+1).join(" ")),t=t?t:"",function i(n,e,o){if(o=o||0,"function"!=typeof r||(e=r(n,e),void 0!==e)){var f=typeof e;if(null===e||"boolean"==f)return String(e);if("number"==f)return isFinite(e)?String(e):"null";if("string"==f)return'"'+e.replace(/"/g,'\\"')+'"';if(e&&"function"==typeof e.toJSON)return i(n,e.toJSON(),o+1);var u=t?"\n"+Array(o+1).join(t):"",a=t?u+t:"";if(e instanceof Array){for(var c=[],l=0;l<e.length;l++){var p=i(l,e[l],o+1);p=p?p:"null",c.push(p)}return"["+(c.length?a+c.join(","+a)+u:"")+"]"}if("object"==f){var c=[];for(var n in e){var p=i(n,e[n],o+1);r instanceof Array?-1!=r.indexOf(n)&&c.push('"'+n+'":'+p):p&&c.push('"'+n+'":'+p)}return"{"+(c.length?a+c.join(","+a)+u:"")+"}"}}}('""',n)}}}(Function("return this")());
!function(){function n(n){return"true"==n?!0:"false"==n?!1:"null"==n?null:"undefined"==n?void 0:isNaN(+n)?n:+n}function i(){for(var i=location.href,o=i.match(RegExp("(\\?|&)(.*?)=(.*?)(?=&|#|$)","g"))||[],t=0;t<o.length;t++){var a=o[t].slice(1).split("="),l=a[0],f=n(a[1]);e[l]=f}}if("undefined"!=typeof location){var e={};i(),location.params=e}}();